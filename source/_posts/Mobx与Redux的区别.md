---
title: Mobx与Redux的区别
date: 2018-03-31 13:38:23
tags: React
---

> 刚进公司时用的是Redux，最近老大让我看Mobx,准备以后的开发用Mobx替换Redux。今天整理了一下Redux和Mobx的一些区别。



Redux 是单一数据源，而*MobX* 是多个store (*MobX* 可以根据应用的UI、数据或业务逻辑来组织store). 

Redux的state 是只读的，只能通过将之前的state 与触发的action 结合，产生新的state，因此是纯净的（pure）。

Mobx的state 即可读又可写，action 是非必须的，可以直接赋值改变，因此是不纯净的（Impure）

React 和 MobX 是一对强力组合。React 通过提供机制把应用状态转换为可渲染组件树并对其进行渲染。而MobX提供机制来存储和更新应用状态供 React 使用。



那么具体到这两种模型，又有一些特定的优缺点呈现出来，先谈谈 各自的优势：

Redux：

1. 数据流流动很自然，因为任何 dispatch 都会导致广播，需要依据对象引用是否变化来控制更新粒度。
2. 如果充分利用时间回溯的特征，可以增强业务的可预测性与错误定位能力。
3. 时间回溯代价很高，因为每次都要更新引用，除非增加代码复杂度，或使用 immutable。
4. 时间回溯的另一个代价是 action 与 reducer 完全脱节，数据流过程需要自行脑补。原因是可回溯必然不能保证引用关系。
5. 引入中间件，其实主要为了解决异步带来的副作用，业务逻辑或多或少参杂着 magic。
6. 但是灵活利用中间件，可以通过约定完成许多复杂的工作。
7. 对 typescript 支持困难。

Mobx：

1. 数据流流动不自然，只有用到的数据才会引发绑定，局部精确更新，但免去了粒度控制烦恼。
2. 没有时间回溯能力，因为数据只有一份引用。
3. 自始至终一份引用，不需要 immutable，也没有复制对象的额开销。
4. 没有这样的烦恼，数据流动由函数调用一气呵成，便于调试。
5. 业务开发不是脑力活，而是体力活，少一些 magic，多一些效率。
6. 由于没有 magic，所以没有中间件机制，没法通过 magic 加快工作效率（这里 magic 是指 action 分发到 reducer 的过程）。
7. 完美支持 typescript。

